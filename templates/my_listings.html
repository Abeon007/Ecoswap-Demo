{% extends "base.html" %}

{% block title %}{{ t('common.myItems') }} - {{ t('common.appName') }}{% endblock %}

{% block content %}
<section class="marketplace-section">
    <div class="container">
        <div class="page-header">
            <div>
                <h1>{{ t('common.myItems') }}</h1>
                <p>{{ t('dashboard.manageListings') }}</p>
            </div>
            <a href="{{ url_for('create_listing') }}" class="btn-primary">+ {{ t('dashboard.addItem') }}</a>
        </div>

        <div class="listings-grid">
            {% if listings %}
            {% for listing in listings %}
            <div class="listing-card">
                <div class="listing-badge {{ listing['listing_type'].lower() }}">
                    {{ t('marketplace.' + listing['listing_type'].lower()) }}
                </div>
                <div class="listing-status {{ listing['status'].lower() }}">
                    {{ t('status.' + listing['status']) }}
                </div>
                {% if listing['image_path'] %}
                <img src="{{ url_for('static', filename=listing['image_path']) }}" alt="{{ listing['title'] }}">
                {% else %}
                <div class="listing-placeholder"><svg width="64" height="64" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg></div>
                {% endif %}
                <div class="listing-content">
                    <h3>{{ listing['title'] }}</h3>
                    <p class="listing-description">{{ listing['description'][:100] }}{% if listing['description']|length
                        > 100 %}...{% endif %}</p>
                    <div class="listing-meta">
                        <span class="condition">{{ t('status.' + listing['condition']) }}</span>
                        <span class="category">{{ t('marketplace.categories.' + listing['category']) }}</span>
                    </div>
                    <div class="listing-actions">
                        <a href="{{ url_for('edit_listing', listing_id=listing['id']) }}"
                            class="btn-secondary btn-small">{{ t('dashboard.edit') }}</a>
                        <a href="{{ url_for('delete_listing', listing_id=listing['id']) }}" class="btn-danger btn-small"
                            onclick="return confirm('{{ t('dashboard.deleteConfirm') }}')">{{ t('dashboard.delete')
                            }}</a>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% else %}
            <div class="empty-state">
                <span class="empty-icon"><svg width="80" height="80" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path
                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z">
                        </path>
                    </svg></span>
                <h3>{{ t('dashboard.noItemsYet') }}</h3>
                <p>{{ t('dashboard.noItemsYet') }}</p>
                <a href="{{ url_for('create_listing') }}" class="btn-primary">{{ t('dashboard.addItem') }}</a>
            </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}